import './polyfills.server.mjs';
import{a as N,b as f,c as A,d as k,h as q,i as D,j as R,k as V,m as G}from"./chunk-DXLZQZML.mjs";import{b as M}from"./chunk-DGTDXFVZ.mjs";import"./chunk-GAWFRP2Z.mjs";import{l as T,m as x}from"./chunk-XRAZEYMU.mjs";import{j as b}from"./chunk-54LN4SOV.mjs";import{Hb as s,Jb as y,Pb as L,Qa as a,Sb as S,Y as h,aa as w,fb as g,hb as _,lb as u,pb as o,qb as t,rb as v,yb as E,zb as C}from"./chunk-A4XH3RZS.mjs";import"./chunk-VVCT4QZE.mjs";var B=(e,n)=>({"is-valid":e,"is-invalid":n});function P(e,n){e&1&&(o(0,"p",14),s(1,"Email is required"),t())}function j(e,n){e&1&&(o(0,"p",14),s(1,"Enter Valid Email"),t())}function I(e,n){if(e&1&&(o(0,"div",6),g(1,P,2,0,"p",14)(2,j,2,0),t()),e&2){let d,l=C();a(),u(1,(d=l.loginForm.get("email"))!=null&&d.getError("required")?1:(d=l.loginForm.get("email"))!=null&&d.getError("email")?2:-1)}}function U(e,n){e&1&&(o(0,"p",14),s(1,"password is required"),t())}function $(e,n){e&1&&(o(0,"p",14),s(1,"Enter Valid password"),t())}function z(e,n){if(e&1&&(o(0,"div",6),g(1,U,2,0,"p",14)(2,$,2,0),t()),e&2){let d,l=C();a(),u(1,(d=l.loginForm.get("password"))!=null&&d.getError("required")?1:(d=l.loginForm.get("password"))!=null&&d.getError("pattern")?2:-1)}}function H(e,n){e&1&&(o(0,"span"),v(1,"i",15),t())}function J(e,n){if(e&1&&(o(0,"p",12),s(1),t()),e&2){let d=C();a(),y("",d.msgError," ")}}function K(e,n){e&1&&(o(0,"p",13),s(1,"success"),t())}var te=(()=>{let n=class n{constructor(){this._AuthService=h(M),this._FormBuilder=h(V),this._Router=h(T),this.loginForm=this._FormBuilder.group({email:[null,[f.required,f.email]],password:[null,[f.required,f.pattern(/^\w{6,}$/)]]}),this.msgError="",this.isLoading=!1,this.msgSuccess=!1}loginSubmit(){this.loginForm.valid?(this.isLoading=!0,this.loginForm.value,this._AuthService.setloginForm(this.loginForm.value).subscribe({next:l=>{l.message==="success"&&(this.msgSuccess=!0,setTimeout(()=>{localStorage.setItem("userToken",l.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},1e3)),this.isLoading=!1},error:l=>{this.msgError=l.error.message,this.isLoading=!1}})):this.loginForm.markAllAsTouched()}confirmPassword(l){return l.get("password")?.value===l.get("rePassword")?.value?null:{misMatch:!0}}};n.\u0275fac=function(F){return new(F||n)},n.\u0275cmp=w({type:n,selectors:[["app-login"]],standalone:!0,features:[L],decls:22,vars:15,consts:[[1,"bg-main-light","shadow","p-2","rounded-4","my-4"],[1,"text-main","h2"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["for","password"],["formControlName","password","type","password","id","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end","gap-4"],["routerLink","/forgot",1,"link-primary"],["type","submit",1,"btn-main",3,"disabled"],[1,"alert","alert-danger","w-50","m-0"],[1,"alert","alert-success","w-50","m-0"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(F,i){if(F&1&&(o(0,"section",0)(1,"h1",1),s(2,"login Now:"),t(),o(3,"form",2),E("ngSubmit",function(){return i.loginSubmit()}),o(4,"div",3)(5,"label",4),s(6,"email"),t(),v(7,"input",5),g(8,I,3,1,"div",6),t(),o(9,"div",3)(10,"label",7),s(11,"password"),t(),v(12,"input",8),g(13,z,3,1,"div",6),t(),o(14,"div",9)(15,"a",10),s(16,"ForgotPassword"),t(),o(17,"button",11),s(18,"login "),g(19,H,2,0,"span"),t()(),g(20,J,2,1,"p",12)(21,K,2,0,"p",13),t()()),F&2){let r,p,m,c;a(3),_("formGroup",i.loginForm),a(4),_("ngClass",S(9,B,!((r=i.loginForm.get("email"))!=null&&r.errors)&&(((r=i.loginForm.get("email"))==null?null:r.touched)||((r=i.loginForm.get("email"))==null?null:r.dirty)),((r=i.loginForm.get("email"))==null?null:r.errors)&&(((r=i.loginForm.get("email"))==null?null:r.touched)||((r=i.loginForm.get("email"))==null?null:r.dirty)))),a(),u(8,(p=i.loginForm.get("email"))!=null&&p.errors&&((p=i.loginForm.get("email"))!=null&&p.touched||(p=i.loginForm.get("email"))!=null&&p.dirty)?8:-1),a(4),_("ngClass",S(12,B,!((m=i.loginForm.get("password"))!=null&&m.errors)&&(((m=i.loginForm.get("password"))==null?null:m.touched)||((m=i.loginForm.get("password"))==null?null:m.dirty)),((m=i.loginForm.get("password"))==null?null:m.errors)&&(((m=i.loginForm.get("password"))==null?null:m.touched)||((m=i.loginForm.get("password"))==null?null:m.dirty)))),a(),u(13,(c=i.loginForm.get("password"))!=null&&c.errors&&((c=i.loginForm.get("password"))!=null&&c.touched||(c=i.loginForm.get("password"))!=null&&c.dirty)?13:-1),a(4),_("disabled",i.loginForm.invalid||i.isLoading),a(2),u(19,i.isLoading?19:-1),a(),u(20,i.msgError?20:-1),a(),u(21,i.msgSuccess==!0?21:-1)}},dependencies:[G,q,N,A,k,D,R,b,x]});let e=n;return e})();export{te as LoginComponent};
