import './polyfills.server.mjs';
import{a as A}from"./chunk-DOC7U5NU.mjs";import{a as D}from"./chunk-3ICJN5PX.mjs";import{a as w,b as f,c as N,d as T,e as q,f as y,h as k,i as F,j as I,m as R}from"./chunk-DXLZQZML.mjs";import"./chunk-GAWFRP2Z.mjs";import{i as E,l as O}from"./chunk-XRAZEYMU.mjs";import"./chunk-54LN4SOV.mjs";import{Hb as l,Pb as x,Qa as a,Y as _,aa as b,fb as m,hb as v,lb as c,pb as r,qb as i,rb as C,yb as S,zb as g}from"./chunk-A4XH3RZS.mjs";import"./chunk-VVCT4QZE.mjs";function G(t,o){t&1&&(r(0,"p",13),l(1,"details is required"),i())}function M(t,o){if(t&1&&(r(0,"div",6),m(1,G,2,0,"p",13),i()),t&2){let d,e=g();a(),c(1,(d=e.ordres.get("details"))!=null&&d.getError("required")?1:-1)}}function V(t,o){t&1&&(r(0,"p",13),l(1,"phone is required"),i())}function P(t,o){t&1&&(r(0,"p",13),l(1,"Enter Valid details"),i())}function j(t,o){if(t&1&&(r(0,"div",6),m(1,V,2,0,"p",13)(2,P,2,0),i()),t&2){let d,e=g();a(),c(1,(d=e.ordres.get("phone"))!=null&&d.getError("required")?1:(d=e.ordres.get("details"))!=null&&d.getError("pattern")?2:-1)}}function $(t,o){t&1&&(r(0,"p",13),l(1,"city is required"),i())}function z(t,o){if(t&1&&(r(0,"div",6),m(1,$,2,0,"p",13),i()),t&2){let d,e=g();a(),c(1,(d=e.ordres.get("city"))!=null&&d.getError("required")?1:-1)}}var X=(()=>{let o=class o{constructor(){this.ordres=new q({details:new y(null,[f.required]),phone:new y(null,[f.required,f.pattern(/^\w{6,}$/)]),city:new y(null,[f.required])}),this._ActivatedRoute=_(E),this._OrdersService=_(D),this._Router=_(O),this._CartService=_(A),this.cartId=""}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:e=>{this.cartId=e.get("id")}})}orderSumbit(){console.log(this.ordres.value),this._OrdersService.checkOut(this.cartId,this.ordres.value).subscribe({next:e=>{console.log(e),(e.status="success")&&(window.open(e.session.url,"_self"),this._CartService.cardNumber.next(e.numOfCartItems))},error:e=>{console.log(e)}})}cashPay(){this._OrdersService.cashOrder(this.cartId,this.ordres.value).subscribe({next:e=>{console.log(e),(e.status="success")&&(this._Router.navigate(["/allorders"]),this._CartService.cardNumber.next(e.numOfCartItems))},error:e=>{}})}};o.\u0275fac=function(h){return new(h||o)},o.\u0275cmp=b({type:o,selectors:[["app-order"]],standalone:!0,features:[x],decls:24,vars:6,consts:[[1,"bg-main-light","w-75","mx-auto","rounded-4","shadow"],[1,"text-center","text-main"],[3,"formGroup"],[1,"my-2"],["for","detalies"],["formControlName","details","id","detalies",1,"form-control"],[1,"alert","alert-danger","w-50"],["for","phone"],["formControlName","phone","type","tel","id","phone",1,"form-control"],["for","city"],["formControlName","city","type","tel","id","city",1,"form-control"],[1,"d-flex","justify-content-center","gap-3"],["type","submit",1,"btn","btn-main",3,"click","disabled"],[1,"m-0"]],template:function(h,n){if(h&1&&(r(0,"section",0)(1,"h1",1),l(2,"shippingAddress"),i(),r(3,"form",2)(4,"div",3)(5,"label",4),l(6,"Detalies:"),i(),C(7,"textarea",5),m(8,M,2,1,"div",6),i(),r(9,"div",3)(10,"label",7),l(11,"Phone"),i(),C(12,"input",8),m(13,j,3,1,"div",6),i(),r(14,"div",3)(15,"label",9),l(16,"City"),i(),C(17,"input",10),m(18,z,2,1,"div",6),i(),r(19,"div",11)(20,"button",12),S("click",function(){return n.orderSumbit()}),l(21,"Check Out"),i(),r(22,"button",12),S("click",function(){return n.cashPay()}),l(23,"Cash Order"),i()()()()),h&2){let s,u,p;a(3),v("formGroup",n.ordres),a(5),c(8,(s=n.ordres.get("details"))!=null&&s.errors&&((s=n.ordres.get("details"))!=null&&s.touched||(s=n.ordres.get("details"))!=null&&s.dirty)?8:-1),a(5),c(13,(u=n.ordres.get("phone"))!=null&&u.errors&&((u=n.ordres.get("phone"))!=null&&u.touched||(u=n.ordres.get("phone"))!=null&&u.dirty)?13:-1),a(5),c(18,(p=n.ordres.get("city"))!=null&&p.errors&&((p=n.ordres.get("city"))!=null&&p.touched||(p=n.ordres.get("city"))!=null&&p.dirty)?18:-1),a(2),v("disabled",n.ordres.invalid),a(2),v("disabled",n.ordres.invalid)}},dependencies:[R,k,w,N,T,F,I]});let t=o;return t})();export{X as OrderComponent};
