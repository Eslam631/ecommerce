import './polyfills.server.mjs';
import{a as J}from"./chunk-UJ6RP4SM.mjs";import{a as Q}from"./chunk-WD7OJTEW.mjs";import{a as U,d as q}from"./chunk-4EILOQJ7.mjs";import{a as G}from"./chunk-DOC7U5NU.mjs";import{a as Y}from"./chunk-RIEM3ZJ4.mjs";import{a as X,b as Z,c as ee}from"./chunk-UFHXFOBE.mjs";import{a as K}from"./chunk-QLETTNOU.mjs";import"./chunk-GTSSCL6B.mjs";import{a as R,c as O,g as H,l as $}from"./chunk-DXLZQZML.mjs";import"./chunk-GAWFRP2Z.mjs";import{m as D}from"./chunk-XRAZEYMU.mjs";import{p as j}from"./chunk-54LN4SOV.mjs";import{Hb as d,Ib as y,Jb as w,Lb as F,Ma as k,Mb as M,Nb as A,Pb as W,Qa as c,Qb as B,Rb as z,Tb as V,Wb as h,Xb as N,Y as m,Yb as L,aa as I,fb as S,hb as g,ka as f,la as C,lb as v,mb as E,nb as x,ob as P,pb as a,qb as s,rb as p,ub as b,yb as _,zb as u}from"./chunk-A4XH3RZS.mjs";import"./chunk-VVCT4QZE.mjs";var te=(i,r)=>r.id,ie=(i,r,n)=>({id:"productPaginate",itemsPerPage:i,currentPage:r,totalItems:n}),re=i=>["/details",i],ne=()=>[1,2,3,4,5];function ae(i,r){i&1&&p(0,"i",8)}function oe(i,r){if(i&1){let n=b();a(0,"i",16),_("click",function(){f(n);let e=u().$implicit,o=u();return C(o.addWishList(e.id))}),s()}}function se(i,r){i&1&&(a(0,"span"),p(1,"i",17),s())}function ce(i,r){i&1&&(a(0,"span"),p(1,"i",18),s())}function le(i,r){if(i&1){let n=b();a(0,"div",4)(1,"div",7)(2,"span"),S(3,ae,1,0,"i",8)(4,oe,1,0),s(),a(5,"div",9),p(6,"img",10),a(7,"h3",11),d(8),s(),a(9,"h4",12),d(10),s(),a(11,"div",13)(12,"span"),d(13),h(14,"currency"),s(),a(15,"div"),x(16,se,2,0,"span",null,E),S(18,ce,2,0,"span"),a(19,"span",14),d(20),s()()()(),a(21,"button",15),_("click",function(){let e=f(n).$implicit,o=u();return C(o.addCart(e.id))}),d(22,"Add To Card"),s()()()}if(i&2){let n=r.$implicit,t=u();c(3),v(3,t.wishId.includes(n.id)?3:4),c(2),g("routerLink",z(11,re,n.id)),c(),g("src",n.imageCover,k)("alt",n.title),c(2),y(n.category.name),c(2),w(" ",n.title.split(" ",2).join(" ")," "),c(3),w("",N(14,9,n.price),"EGP "),c(3),P(B(13,ne).slice(0,n.ratingsAverage)),c(2),v(18,n.ratingsAverage%1!==0?18:-1),c(2),y(n.ratingsAverage)}}var Le=(()=>{let r=class r{constructor(){this.productsList=[],this.categorieslist=[],this.text="",this.wishId=null,this._ProductsService=m(U),this._CategoriesService=m(Y),this._CartService=m(G),this._ToastrService=m(K),this._WishlistService=m(Q),this.pageSize=0,this.currentPage=1,this.total=0}ngOnInit(){this._CategoriesService.getCatogeries().subscribe({next:t=>{this.categorieslist=t.data},error(t){console.log(t)}}),this.getAllProductSub=this._ProductsService.getAllProducts().subscribe({next:t=>{this.productsList=t.data,this.pageSize=t.metadata.limit,this.currentPage=t.metadata.currentPage,this.total=t.results,localStorage.getItem("heart")!==null&&(this.wishId=localStorage.getItem("heart"))},error:t=>{}})}ngOnDestroy(){this.getAllProductSub?.unsubscribe()}addCart(t){this._CartService.getCartItems(t).subscribe({next:e=>{console.log(e),this._ToastrService.success(e.message,e.status),this._CartService.cardNumber.next(e.numOfCartItems)},error:e=>{console.log(e)}})}addWishList(t){this._WishlistService.addWishList(t).subscribe({next:e=>{this._ToastrService.success(e.message,e.status),this.wishId=e.data,localStorage.setItem("heart",this.wishId.toString())},error:e=>{console.log(e)}})}pageChanged(t){this._ProductsService.getAllProducts(t).subscribe({next:e=>{console.log(e.metadata),this.productsList=e.data,this.pageSize=e.metadata.limit,this.currentPage=e.metadata.currentPage,this.total=e.results},error:e=>{console.log(e)}})}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=I({type:r,selectors:[["app-product"]],standalone:!0,features:[W],decls:11,vars:15,consts:[[1,"my-4"],[1,"text-main","text-center"],["type","search","placeholder","search by name",1,"w-50","mx-auto","form-control","my-2",3,"ngModelChange","ngModel"],[1,"row"],[1,"col-md-2","p-2"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],["id","productPaginate","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"pageChange","pageBoundsCorrection","maxSize","directionLinks","autoHide","responsive"],[1,"product","p-2"],[1,"fa-solid","fa-heart","fa-xl",2,"color","#f00000"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted"],[1,"btn-main","w-100",3,"click"],[1,"fa-regular","fa-heart","text-main","fa-xl",3,"click"],[1,"fas","fa-star","rating-color"],[1,"fas","fa-star-half-stroke","rating-color"]],template:function(e,o){e&1&&(a(0,"section",0)(1,"h2",1),d(2,"All Products"),s(),a(3,"input",2),A("ngModelChange",function(l){return M(o.text,l)||(o.text=l),l}),s(),a(4,"div",3),x(5,le,23,14,"div",4,te),h(7,"paginate"),h(8,"search"),s(),a(9,"div",5)(10,"pagination-controls",6),_("pageChange",function(l){return o.pageChanged(l)})("pageBoundsCorrection",function(l){return o.pageChanged(l)}),s()()()),e&2&&(c(3),F("ngModel",o.text),c(2),P(L(8,8,L(7,5,o.productsList,V(11,ie,o.pageSize,o.currentPage,o.total)),o.text)),c(5),g("maxSize",9)("directionLinks",!0)("autoHide",!0)("responsive",!0))},dependencies:[q,D,J,$,R,O,H,j,ee,X,Z]});let i=r;return i})();export{Le as ProductComponent};
