import{b as A}from"./chunk-KHLBL7HP.js";import{a as F,b as u,c as T,d as V,e as x,f,h as L,i as q,j as N,m as G}from"./chunk-LC6F23MH.js";import{h as b}from"./chunk-IZDHB5GI.js";import"./chunk-TF6EPCZ3.js";import"./chunk-UKABTF7F.js";import{Ab as m,Ib as l,Kb as y,Qb as P,Ra as a,aa as h,da as S,gb as p,ib as c,mb as d,na as C,oa as g,qb as o,rb as n,sb as _,vb as v,zb as w}from"./chunk-INXF3MO3.js";function R(t,r){t&1&&(o(0,"p",10),l(1,"Email is required"),n())}function D(t,r){t&1&&(o(0,"p",10),l(1,"Enter Valid Email"),n())}function M(t,r){if(t&1&&(o(0,"div",7),p(1,R,2,0,"p",10)(2,D,2,0),n()),t&2){let i,e=m(2);a(),d(1,(i=e.verifyEmail.get("email"))!=null&&i.getError("required")?1:(i=e.verifyEmail.get("email"))!=null&&i.getError("email")?2:-1)}}function I(t,r){if(t&1&&(o(0,"p",8),l(1),n()),t&2){let i=m(2);a(),y("",i.msgError," ")}}function k(t,r){t&1&&(o(0,"span"),_(1,"i",11),n())}function $(t,r){if(t&1){let i=v();o(0,"form",3),w("ngSubmit",function(){C(i);let s=m();return g(s.verifyEmailSubmit())}),o(1,"div",4)(2,"label",5),l(3,"Email:"),n(),_(4,"input",6),p(5,M,3,1,"div",7)(6,I,2,1,"p",8),n(),o(7,"button",9),l(8,"verifyEmail "),p(9,k,2,0,"span"),n()()}if(t&2){let i,e=m();c("formGroup",e.verifyEmail),a(5),d(5,(i=e.verifyEmail.get("email"))!=null&&i.errors&&((i=e.verifyEmail.get("email"))!=null&&i.touched||(i=e.verifyEmail.get("email"))!=null&&i.dirty)?5:-1),a(),d(6,e.msgError?6:-1),a(),c("disabled",e.verifyEmail.invalid||e.isLoading),a(2),d(9,e.isLoading?9:-1)}}function j(t,r){t&1&&(o(0,"p",10),l(1,"resetCode is required"),n())}function U(t,r){t&1&&(o(0,"p",10),l(1,"Enter Valid Code"),n())}function z(t,r){if(t&1&&(o(0,"div",7),p(1,j,2,0,"p",10)(2,U,2,0),n()),t&2){let i,e=m(2);a(),d(1,(i=e.verifyCode.get("resetCode"))!=null&&i.getError("required")?1:(i=e.verifyCode.get("resetCode"))!=null&&i.getError("pattern")?2:-1)}}function B(t,r){if(t&1&&(o(0,"p",8),l(1),n()),t&2){let i=m(2);a(),y("",i.msgError," ")}}function H(t,r){t&1&&(o(0,"span"),_(1,"i",11),n())}function J(t,r){if(t&1){let i=v();o(0,"form",3),w("ngSubmit",function(){C(i);let s=m();return g(s.verifyCodeSubmit())}),o(1,"div",4)(2,"label",12),l(3,"code:"),n(),_(4,"input",13),p(5,z,3,1,"div",7)(6,B,2,1,"p",8),n(),o(7,"button",9),l(8,"verifyCode "),p(9,H,2,0,"span"),n()()}if(t&2){let i,e=m();c("formGroup",e.verifyCode),a(5),d(5,(i=e.verifyCode.get("resetCode"))!=null&&i.errors&&((i=e.verifyCode.get("resetCode"))!=null&&i.touched||(i=e.verifyCode.get("resetCode"))!=null&&i.dirty)?5:-1),a(),d(6,e.msgError?6:-1),a(),c("disabled",e.verifyCode.invalid||e.isLoading),a(2),d(9,e.isLoading?9:-1)}}function K(t,r){t&1&&(o(0,"p",10),l(1,"password is required"),n())}function O(t,r){t&1&&(o(0,"p",10),l(1,"Enter Valid password"),n())}function Q(t,r){if(t&1&&(o(0,"div",7),p(1,K,2,0,"p",10)(2,O,2,0),n()),t&2){let i,e=m(2);a(),d(1,(i=e.resetPassword.get("password"))!=null&&i.getError("required")?1:(i=e.resetPassword.get("password"))!=null&&i.getError("pattern")?2:-1)}}function W(t,r){t&1&&(o(0,"span"),_(1,"i",11),n())}function X(t,r){if(t&1){let i=v();o(0,"form",3),w("ngSubmit",function(){C(i);let s=m();return g(s.ResetPasswordSubmit())}),o(1,"div",4)(2,"label",5),l(3,"Email:"),n(),_(4,"input",14),n(),o(5,"div",4)(6,"label",15),l(7,"newPassword:"),n(),_(8,"input",16),p(9,Q,3,1,"div",7),n(),o(10,"button",9),l(11,"newPassword "),p(12,W,2,0,"span"),n()()}if(t&2){let i,e=m();c("formGroup",e.resetPassword),a(9),d(9,(i=e.resetPassword.get("password"))!=null&&i.errors&&((i=e.resetPassword.get("password"))!=null&&i.touched||(i=e.resetPassword.get("password"))!=null&&i.dirty)?9:-1),a(),c("disabled",e.resetPassword.invalid||e.isLoading),a(2),d(12,e.isLoading?12:-1)}}var re=(()=>{let r=class r{constructor(){this._AuthService=h(A),this._Router=h(b),this.isLoading=!1,this.msgError="",this.step=1,this.verifyEmail=new x({email:new f(null,[u.required,u.email])}),this.verifyCode=new x({resetCode:new f(null,[u.required,u.pattern(/^[0-9]{6}$/)])}),this.resetPassword=new x({email:new f(null,[u.required,u.email]),newPassword:new f(null,[u.required,u.pattern(/^\w{6,}$/)])})}verifyEmailSubmit(){if(this.verifyEmail.valid){this.isLoading=!0,this.verifyEmail.value;let e=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(e),this._AuthService.setEmailVerify(this.verifyEmail.value).subscribe({next:s=>{s.statusMsg==="success"&&(this.step=2,this.isLoading=!1)},error:s=>{console.log(s.error.message),this.msgError=s.error.message,this.isLoading=!1}})}}verifyCodeSubmit(){this.verifyCode.valid&&(this.isLoading=!0,this._AuthService.setCodeVerify(this.verifyCode.value).subscribe({next:e=>{e.status==="Success"&&(this.step=3,this.isLoading=!1)},error:e=>{console.log(e),this.msgError=e.error.message,this.isLoading=!1}}))}ResetPasswordSubmit(){this.resetPassword.valid&&(this.isLoading=!0,this._AuthService.setResetPassword(this.resetPassword.value).subscribe({next:e=>{localStorage.setItem("userToken",e.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"]),this.isLoading=!1},error:e=>{console.log(e),this.msgError=e.error.message,this.isLoading=!1}}))}};r.\u0275fac=function(s){return new(s||r)},r.\u0275cmp=S({type:r,selectors:[["app-forgat-password"]],standalone:!0,features:[P],decls:6,vars:3,consts:[[1,"m-5"],[1,"text-main","text-center","my-2"],[1,"bg-main-light","rounded-3","shadow","p-3",3,"formGroup"],[1,"bg-main-light","rounded-3","shadow","p-3",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control"],[1,"alert","alert-danger","w-50"],[1,"alert","alert-danger","w-75","m-0"],[1,"btn-main",3,"disabled"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"],["for","code"],["formControlName","resetCode","type","text","id","code",1,"form-control"],["readonly","","formControlName","email","type","email","id","email",1,"form-control"],["for","newPassword"],["formControlName","newPassword","type","Password","id","newPassword",1,"form-control"]],template:function(s,E){s&1&&(o(0,"section",0)(1,"h1",1),l(2,"ForgatPassword"),n(),p(3,$,10,5,"form",2)(4,J,10,5,"form",2)(5,X,13,4,"form",2),n()),s&2&&(a(3),d(3,E.step==1?3:-1),a(),d(4,E.step==2?4:-1),a(),d(5,E.step==3?5:-1))},dependencies:[G,L,F,T,V,q,N]});let t=r;return t})();export{re as ForgatPasswordComponent};
