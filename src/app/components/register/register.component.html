<section class="bg-main-light shadow p-2 rounded-4 my-4">
  <h1 class="text-main h2">Register Now:</h1>
  <form [formGroup]="registerForm" (ngSubmit)="registerSubmit()">
    <div class="my-2">
      <label for="name">name</label>
      <input [ngClass]="{'is-valid': !registerForm.get('name')?.errors && (registerForm.get('name')?.touched ||registerForm.get('name')?.dirty),
        'is-invalid': registerForm.get('name')?.errors && (registerForm.get('name')?.touched ||registerForm.get('name')?.dirty)
      }" formControlName="name" type="text" id="name" class="form-control">
@if(registerForm.get('name')?.errors && (registerForm.get('name')?.touched ||registerForm.get('name')?.dirty)

){
      <div class="alert alert-danger w-50">
@if(registerForm.get('name')?.getError('required')){
        <p class="m-0">Name is required</p>}
        @else if(registerForm.get('name')?.getError('minlength')){
        <p class="m-0">Name Should be more than or equal  3 chars</p>}
        @else if (registerForm.get('name')?.getError('maxlength')) {

        <p class="m-0">Name Should be less than or equal  20 chars</p>}
      </div>}
    </div>
    <div class="my-2">
      <label for="email">email</label>
      <input [ngClass]="{'is-valid': !registerForm.get('email')?.errors && (registerForm.get('email')?.touched ||registerForm.get('email')?.dirty),
      'is-invalid': registerForm.get('email')?.errors && (registerForm.get('email')?.touched ||registerForm.get('email')?.dirty)}" formControlName="email" type="email" id="email" class="form-control">
      @if(registerForm.get('email')?.errors && (registerForm.get('email')?.touched ||registerForm.get('email')?.dirty)

){
      <div class="alert alert-danger w-50">
@if(registerForm.get('email')?.getError('required')){
        <p class="m-0">Email is required</p>}
        @else if(registerForm.get('email')?.getError('email')){
        <p class="m-0">Enter Valid Email</p>}

      </div>}

    </div>
    <div class="my-2">
      <label for="password">password</label>
      <input [ngClass]="{'is-valid':!registerForm.get('password')?.errors &&( registerForm.get('password')?.touched || registerForm.get('password')?.dirty),
      'is-invalid':registerForm.get('password')?.errors &&( registerForm.get('password')?.touched || registerForm.get('password')?.dirty)

      }" formControlName="password" type="password" id="password" class="form-control">
      @if(registerForm.get('password')?.errors &&( registerForm.get('password')?.touched || registerForm.get('password')?.dirty)

      ){
            <div class="alert alert-danger w-50">
      @if(registerForm.get('password')?.getError('required')){
              <p class="m-0">password is required</p>}
              @else if(registerForm.get('password')?.getError('pattern')){
              <p class="m-0">Enter Valid password</p>}

            </div>}

    </div>
    <div class="my-2">
      <label for="repassword">repassword</label>
      <input [ngClass]="{'is-valid':!registerForm.getError('misMatch')&& (registerForm.get('rePassword')?.touched ||registerForm.get('rePassword')?.dirty),
        'is-invalid':registerForm.getError('misMatch')&& (registerForm.get('rePassword')?.touched ||registerForm.get('rePassword')?.dirty)
      }" formControlName="rePassword" type="password" id="repassword" class="form-control">
     @if(registerForm.getError('misMatch')&& (registerForm.get('rePassword')?.touched ||registerForm.get('rePassword')?.dirty)){
      <p class="alert alert-danger w-50">
password confirmation is incorrect
      </p>

     }

    </div>
    <div class="my-2">
      <label for="phone">phone</label>
      <input [ngClass]="{
        'is-valid':!registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched||registerForm.get('phone')?.dirty),
        'is-invalid':registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched||registerForm.get('phone')?.dirty)
      }" formControlName="phone" type="tel" id="phone" class="form-control">
      @if(registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched||registerForm.get('phone')?.dirty)

      ){
            <div class="alert alert-danger w-50">
      @if(registerForm.get('phone')?.getError('required')){
              <p class="m-0">Email is required</p>}
              @else if(registerForm.get('phone')?.getError('pattern')){
              <p class="m-0">Enter Valid phone</p>}

            </div>}

    </div>
    <button [disabled]="registerForm.invalid ||isLoading" type="submit" class="btn-main ms-auto d-block">Register
      @if(isLoading){
      <span><i class="fas fa-spin fa-spinner"></i></span>}
    </button>
    @if(msgError){
      <p class="alert alert-danger w-50 m-0">{{msgError}} </p>
    }

    @if (msgSuccess==true) {
      <p class="alert alert-success w-50 m-0">success</p>
    }
  </form>
</section>
