<section class="m-5">
  <h1 class="text-main text-center my-2">ForgatPassword</h1>

  @if (step==1) {
    <form class="bg-main-light rounded-3 shadow p-3" [formGroup]="verifyEmail" (ngSubmit)="verifyEmailSubmit()">
      <div class="my-2">
        <label for="email">Email:</label>
        <input formControlName="email" type="email" id="email" class="form-control" >

        @if(verifyEmail.get('email')?.errors && (verifyEmail.get('email')?.touched ||verifyEmail.get('email')?.dirty)

        ){
              <div class="alert alert-danger w-50">
        @if(verifyEmail.get('email')?.getError('required')){
                <p class="m-0">Email is required</p>}
                @else if(verifyEmail.get('email')?.getError('email')){
                <p class="m-0">Enter Valid Email</p>}


              </div>}
              @if(msgError){
                <p class="alert alert-danger w-75 m-0">{{msgError}}  </p>
              }

      </div>
      <button [disabled]="verifyEmail.invalid ||isLoading" class="btn-main">verifyEmail
 @if (isLoading) {
          <span><i class="fas fa-spin fa-spinner"></i></span>}
      </button>
    </form>
  }

@if (step==2) {
  <form class="bg-main-light rounded-3 shadow p-3" [formGroup]="verifyCode" (ngSubmit)="verifyCodeSubmit()">
    <div class="my-2">
      <label for="code">code:</label>
      <input formControlName="resetCode" type="text" id="code" class="form-control" >
      @if(verifyCode.get('resetCode')?.errors && (verifyCode.get('resetCode')?.touched ||verifyCode.get('resetCode')?.dirty)

      ){
            <div class="alert alert-danger w-50">
      @if(verifyCode.get('resetCode')?.getError('required')){
              <p class="m-0">resetCode is required</p>}
              @else if(verifyCode.get('resetCode')?.getError('pattern')){
              <p class="m-0">Enter Valid Code</p>}


            </div>}
            @if(msgError){
              <p class="alert alert-danger w-75 m-0">{{msgError}}  </p>
            }

    </div>
    <button [disabled]="verifyCode.invalid ||isLoading" class="btn-main">verifyCode
      @if(isLoading){
        <span><i class="fas fa-spin fa-spinner"></i></span>}
    </button>
  </form>

}

@if (step==3) {  <form class="bg-main-light rounded-3 shadow p-3" [formGroup]="resetPassword" (ngSubmit)="ResetPasswordSubmit()">
  <div class="my-2">
    <label for="email">Email:</label>
    <input readonly formControlName="email" type="email" id="email" class="form-control" >
  </div>
  <div class="my-2">
    <label for="newPassword">newPassword:</label>
    <input formControlName="newPassword" type="Password" id="newPassword" class="form-control" >
    @if(resetPassword.get('password')?.errors &&( resetPassword.get('password')?.touched || resetPassword.get('password')?.dirty)

      ){
            <div class="alert alert-danger w-50">
      @if(resetPassword.get('password')?.getError('required')){
              <p class="m-0">password is required</p>}
              @else if(resetPassword.get('password')?.getError('pattern')){
              <p class="m-0">Enter Valid password</p>}

            </div>}

  </div>


  <button [disabled]="resetPassword.invalid ||isLoading" class="btn-main">newPassword
    @if(isLoading){
      <span><i class="fas fa-spin fa-spinner"></i></span>}
  </button>
</form>}

</section>
